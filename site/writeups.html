<!doctype html><html lang="en"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>Writeups â€” Flagaholic</title>
<link rel="stylesheet" href="./css/site.css">
</head><body><div class="wrap">
  <header>
    <div class="brand">
      <img class="logo" src="./assets/teamlogo/teampfp.png" alt="Flagaholic" width="40" height="40">
      <strong>Flagaholic</strong>
    </div>
    <nav>
      <a href="./index.html">Home</a>
      <a href="./members.html">Members</a>
      <a href="./achievements.html">Achievements</a>
      <a href="./writeups.html" class="active">Writeups</a>
      <a href="./contact.html">Contact</a>
    </nav>
  </header>

  <script>
    async function loadDirectory() {
      const apiBase = 'https://api.github.com/repos/Flagaholic/flagaholic.github.io/contents/site/writeups';
      const ul = document.getElementById('writeups-list');

      try {
        const dirRes = await fetch(apiBase);
        if (!dirRes.ok) {
          ul.insertAdjacentHTML('beforeend', '<li>Unable to fetch writeups, please try again later. If this issue persists, scream at us in discord and we will fix it asap</li>');
          return;
        }

        const years = await dirRes.json();
        years.sort((a, b) => b.name.localeCompare(a.name));

        for (const year of years) {
          if (year.type !== 'dir') continue;
          const yearLi = document.createElement('li');
          yearLi.textContent = year.name;
          const yearUl = document.createElement('ul');
          yearLi.appendChild(yearUl);
          const compsRes = await fetch(`${apiBase}/${year.name}`);
          const comps = await compsRes.json();
          comps.sort((a, b) => a.name.localeCompare(b.name));


          for (const comp of comps) {
            if (comp.type !== 'dir') continue;

            const compLi = document.createElement('li');
            compLi.textContent = comp.name.replace(/[-_]/g, ' ');
            const compUl = document.createElement('ul');
            compLi.appendChild(compUl);
            const wusRes = await fetch(`${apiBase}/${year.name}/${comp.name}`);
            const wus = await wusRes.json();
            wus.sort((a, b) => a.name.localeCompare(b.name));

            for (const wu of wus) {
              if (wu.type !== 'dir') continue;
              const wuContentsRes = await fetch(`${apiBase}/${year.name}/${comp.name}/${wu.name}`);
              if (!wuContentsRes.ok) continue;
              const wuContents = await wuContentsRes.json();
              const mdFiles = wuContents.filter(f => f.type === 'file' && /\.md$/i.test(f.name));
              if (mdFiles.length === 0) continue;

              const preferred = mdFiles.find(f => f.name.toLowerCase() === 'readme.md') || mdFiles[0];

              const wuLi = document.createElement('li');
              const wuLink = document.createElement('a');
              wuLink.href = `./writeups/${encodeURIComponent(year.name)}/${encodeURIComponent(comp.name)}/${encodeURIComponent(wu.name)}/${encodeURIComponent(preferred.name)}`;
              wuLink.textContent = wu.name.replace(/[-_]/g, ' ');
              wuLi.appendChild(wuLink);
              compUl.appendChild(wuLi);
            }

            if (compUl.children.length > 0) {
              yearUl.appendChild(compLi);
            }
          }

          if (yearUl.children.length > 0) {
            ul.appendChild(yearLi);
          }
        }

      } catch (err) {
        ul.insertAdjacentHTML('beforeend', '<li>Error loading writeups. If you didn\'t change anything please scream at us in discord with the console logged error :pray:</li>');
        console.error(err);
      }
    }

    document.addEventListener('DOMContentLoaded', loadDirectory);
  </script>

  <main class="main">
    <div class="card"><h1>Writeups</h1>
      <ul id="writeups-list">
        <li><a href="./writeups/1970/TEST1/EPOCH/README.md">TESTING: OVERWRITE (EPOCH)</a></li>
        <li><a href="https://github.com/codestube/CTF-Write-Ups">Yoo youstube got some fine ahh writeups</a></li>
        <!-- populated dynamically unless entries manually added here (idk cuz your wu is special or the auto fetch script is crying for help and can't get your writeup or sth) -->
      </ul>
      <!-- <div id="readme" style="margin-top:1em;"></div> -->
    </div>
  </main>
</div></body></html>
